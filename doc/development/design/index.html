<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Design</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link rel="stylesheet" href="../../../style.css" type="text/css" />

<link rel="stylesheet" href="../../../local.css" type="text/css" />










</head>
<body>

<div class="page">

<div class="pageheader">
<div class="header">
<span>
<span class="parentlinks">

<a href="../../../">Orbital Transfer</a>/ 

<a href="../../">doc</a>/ 

<a href="../">development</a>/ 

</span>
<span class="title">
Design

</span>
</span>



</div>


<div class="actions">
<ul>


<li><a href="../../../recentchanges/">RecentChanges</a></li>


<li><a rel="nofollow" href="https://github.com/orbital-transfer/orbital-transfer.github.io/commits/source/doc/development/design/index.mdwn">History</a></li>







</ul>
</div>








</div>



<div class="sidebar">
<ul>
    <li><a href="../../">Documentation</a></li>
    <ul>
        <li><a href="../">Development</a></li>
    </ul>
</ul>

</div>



<div id="pagebody">

<div id="content" role="main">
<h1 id="bootstrapping">Bootstrapping</h1>

<ul>
<li>Current
<ul>
<li>config:
<ul>
<li>Install directory
<ul>
<li>global install: no directory specified (so installs to <code>perl -V:sitelib</code>)</li>
<li>CI install: in <code>~/.orbital</code>.
<ul>
<li>Only when $ENV{CI} is true</li>
</ul></li>
<li>default: relative to launch-site repo</li>
</ul></li>
</ul></li>
<li>steps:
<ol>
<li>Install <code>cpm</code> (from vendor submodules) if not available</li>
<li>Install <code>cpanm</code> using <code>cpm</code>.</li>
<li>Install <code>App::scan_prereqs_cpanfile</code> using <code>cpanm</code>.</li>
<li>Generate a <code>cpanfile</code> for every orbital-transfer submodule.</li>
<li>Install dependencies from <code>cpanfile</code> for every orbital-transfer
submodule using <code>cpm</code> then <code>cpanm</code>.</li>
</ol></li>
</ul></li>
<li>Future
<ul>
<li>config:
<ul>
<li>Install to directory, upload to GitHub</li>
<li>Install to directory at bootstrap time
<ul>
<li>determine the directory to install to using a class</li>
</ul></li>
</ul></li>
<li>steps: same as before
<ul>
<li>Perhaps need to generate cpanfile in each repo, only install and run
<code>App::scan_prereqs_cpanfile</code> if <code>cpanfile</code> missing.</li>
</ul></li>
<li>decreasing deps:
<ul>
<li>Need to outline a set of modules that are pure-Perl or can be translated
to pure-Perl equivalents.</li>
<li>Some of these can be installed as the base dependencies of all the
Orbital::Payload::* modules.</li>
<li>Others need to be set up to be installed based on context:
<ul>
<li>e.g., if loading on GitHub actions, then load everything needed there</li>
</ul></li>
<li>Create a way of specifying features that require different sets of
modules in a distribution.</li>
<li>Use a loader function to look up the features needed by a module and
install if necessary.</li>
<li>Need to have a context for installation and loading which holds the
directories for bootstrapping.</li>
</ul></li>
</ul></li>
</ul>

<h1 id="workflowgraph">Workflow graph</h1>

<ul>
<li>Task
<ul>
<li>Something that can be run.</li>
<li>Has dependencies.</li>
<li>Has inputs / outputs
<ul>
<li>Can be parameters, directories, files</li>
</ul></li>
<li>Can have specialised tasks for CIs
<ul>
<li>e.g., on GitHub Actions, this would indicate which
OS the task is running on</li>
</ul></li>
</ul></li>
<li>Resources
<ul>
<li>lockable / mutex
<ul>
<li>Some resources can only be accessed for writing by one task at a time,
e.g., installing CPAN modules to a library directory, running apt-get.</li>
</ul></li>
</ul></li>
<li>Scheduling
<ul>
<li><a href="https://en.wikipedia.org/wiki/Coffman&ndash;Graham_algorithm">https://en.wikipedia.org/wiki/Coffmanâ€“Graham_algorithm</a></li>
<li><a href="https://metacpan.org/pod/Bencher::Scenario::GraphTopologicalSortModules">https://metacpan.org/pod/Bencher::Scenario::GraphTopologicalSortModules</a>
<ul>
<li><a href="https://metacpan.org/pod/Data::Graph::Util">https://metacpan.org/pod/Data::Graph::Util</a></li>
<li><a href="https://metacpan.org/pod/Algorithm::Dependency">https://metacpan.org/pod/Algorithm::Dependency</a></li>
</ul></li>
</ul></li>
</ul>

<h1 id="organisationofproject">Organisation of project</h1>

<ul>
<li>Payload:
<ul>
<li>Environment: language</li>
<li>System:
<ul>
<li>Operating system</li>
<li>Package management system</li>
</ul></li>
<li>Service:
<ul>
<li>Usually a web service</li>
</ul></li>
<li>VCS: version control system</li>
</ul></li>
</ul>

</div>







</div>

<div id="footer" class="pagefooter" role="contentinfo">

<div id="pageinfo">











<div class="pagedate">
Last edited <span class="date">Mon Mar 15 22:14:59 2021</span>
<!-- Created <span class="date">Sun Jan 24 05:22:03 2021</span> -->
</div>

</div>


<!-- from Orbital Transfer -->
</div>

</div>

</body>
</html>
